# ===============================
# Ingestion & OCR Configuration
# ===============================
# Poppler bin path (Windows only). Example after installing poppler:
# Leave blank if not installed (MuPDF will work without OCR fallback)
POPPLER_PATH=C:\\Program Files\\poppler-25.07.0\\Library\\bin
# Optional explicit Tesseract binary path (if not on PATH)
TESSERACT_PATH=C:\\Program Files\\Tesseract-OCR\\tesseract.exe

# Base OCR language (used for initial Tesseract calls before dynamic detection)
OCR_LANG=tha+eng
# DPI for OCR rendering (higher improves accuracy, increases cost/time)
OCR_DPI=450
# Minimum quality score (MuPDF text below this triggers OCR fallback)
MIN_QUALITY_SCORE=0.2
# Minimum length of extracted text to accept without OCR
MIN_LENGTH=50

# ===============================
# Chunking Configuration
# ===============================
# OCR Engine: auto (fallback), poppler (text only), tesseract, typhoon
OCR_ENGINE=auto
CHUNK_MIN_TOKENS=400
CHUNK_MAX_TOKENS=800
CHUNK_OVERLAP_RATIO=0.12
CHAR_PER_TOKEN=4.0

# ===============================
# Embeddings / Vector Store
# ===============================
EMBEDDING_MODEL=BAAI/bge-m3
EMBED_BATCH=32
RRF_K=60
TOKEN_BUDGET=1200

# ===============================
# Typhoon OCR Integration
# ===============================
# Enable (1) or disable (0) Typhoon OCR usage
TY_OCR_ENABLE=1
# Base URL for Typhoon OCR API
TY_OCR_BASE=https://api.opentyphoon.ai
# Your Typhoon API key
TY_OCR_API_KEY=sk-Pz7f91XwfGEmRN9CY9iPzpT2WYSan5AvHwtIDp9wyKHXIzPX
TY_OCR_MODEL=typhoon-ocr

# ===============================
# Optional External Embedding API (leave blank for local model)
EMBEDDING_API_BASE=
EMBEDDING_API_KEY=

# ===============================
# Data Directory Override (leave blank to use default in config)
DATA_DIR=

# ===============================
# Logging / Diagnostics (future use)
# LOG_LEVEL=INFO
# ENABLE_PROFILING=0

# ===============================
# Notes:
# - Adjust POPPLER_PATH and TESSERACT_PATH to your actual install locations.
# - Set TY_OCR_ENABLE=0 if you want to skip Typhoon OCR completely.
# - For production, move secrets (API keys) to a secure secret manager instead of .env.
